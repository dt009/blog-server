(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"3zPb":function(e,t,o){e.exports=function(e){var t={};function o(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=61)}({0:function(e,t){e.exports=function(e,t,o,i,a,l){var n,s=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(n=e,s=e.default);var d,c="function"==typeof s?s.options:s;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),o&&(c.functional=!0),a&&(c._scopeId=a),l?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=d):i&&(d=i),d){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,d):[d]}return{esModule:n,exports:s,options:c}}},1:function(e,t){e.exports=o("0BDH")},13:function(e,t){e.exports=o("UShQ")},61:function(e,t,o){"use strict";t.__esModule=!0;var i=function(e){return e&&e.__esModule?e:{default:e}}(o(62));i.default.install=function(e){e.component(i.default.name,i.default)},t.default=i.default},62:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(63),a=o.n(i),l=o(64),n=o(0)(a.a,l.a,!1,null,null,null);t.default=n.exports},63:function(e,t,o){"use strict";t.__esModule=!0;var i=n(o(13)),a=n(o(8)),l=n(o(1));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:"ElDialog",mixins:[i.default,l.default,a.default],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1}},data:function(){return{closed:!1}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){t.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},64:function(e,t,o){"use strict";var i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"dialog-fade"},on:{"after-leave":e.afterLeave}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.handleWrapperClick(t)}}},[o("div",{ref:"dialog",staticClass:"el-dialog",class:[{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style},[o("div",{staticClass:"el-dialog__header"},[e._t("title",[o("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?o("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[o("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?o("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?o("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},staticRenderFns:[]};t.a=i},8:function(e,t){e.exports=o("K7XR")}})},D1zH:function(e,t,o){},DGeY:function(e,t,o){},EMu8:function(e,t,o){},p8y5:function(e,t,o){},tyXq:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"categories-manage-page"},[o("h2",[e._v("分类管理")]),e._v(" "),o("div",{staticClass:"tags-manage-page"},[o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddNewCategories}},[e._v("新增一个分类")]),e._v(" "),o("el-dialog",{attrs:{visible:e.isDialogShow,title:"add"===e.dialogType?"新增分类":"修改分类"},on:{"update:visible":function(t){e.isDialogShow=t}}},[o("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"status-icon":"",rules:e.dialogFormRules}},[o("el-form-item",{attrs:{label:"分类的 Code","label-width":"120px",xsize:"small",prop:"code"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"分类的 Code eg: test || study"},model:{value:e.dialogForm.code,callback:function(t){e.$set(e.dialogForm,"code",t)},expression:"dialogForm.code"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"分类的 Name","label-width":"120px",xsize:"small",prop:"name"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"分类名称 eg: 测试 || 数据库"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"分类的描述","label-width":"120px",xsize:"small",prop:"description"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"分类描述 eg: 这是分类标示测试"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1),e._v(" "),o("el-form-item",{attrs:{"label-width":"120px"}},[o("el-button",{on:{click:function(t){e.handleHideDialog("dialogForm")}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.isDialogLoading},on:{click:function(t){e.handleAddAndUpdateCategories("dialogForm")}}},[e._v(e._s("add"===e.dialogType?"确认添加":"确认修改"))])],1)],1)],1),e._v(" "),o("el-table",{attrs:{data:e.showCategoriesList,stripe:"","header-cell-style":{background:"#f5f7fa"}}},[o("el-table-column",{attrs:{label:"",prop:"sign",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{label:"分类 Code",prop:"code",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{label:"分类名称",prop:"name",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{label:"使用次数",prop:"used_count",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"分类描述",prop:"description","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"预览",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[o("el-tooltip",{attrs:{content:t.row.description,placement:"top",effect:"light"}},[o("el-tag",{attrs:{hit:!0,size:e.getTagProps(t.row.used_count).size,type:e.getTagProps(t.row.used_count).type}},[o("div",[e._v(e._s(t.row.name))])])],1)],1)}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.handleChangeTag(t.row)}}},[e._v("修改")]),e._v(" "),o("el-popover",{attrs:{placement:"top"},model:{value:t.row.popover,callback:function(o){e.$set(t.row,"popover",o)},expression:"scope.row.popover"}},[o("p",[o("i",{staticClass:"el-icon-warning",staticStyle:{color:"#0f0"}}),e._v(" 确定要删除这条信息吗?")]),e._v(" "),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.popover=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.isDeleteLoading,size:"mini"},on:{click:function(o){e.handleDeleteTag(t.$index,t.row)}}},[e._v("确定")])],1),e._v(" "),o("el-button",{attrs:{slot:"reference",size:"small",type:"text"},on:{click:function(e){t.row.popover=!0}},slot:"reference"},[e._v("删除")])],1)],1)}}])})],1)],1)])};i._withStripped=!0;o("D7fx"),o("RQ3N");var a=o("9SnE"),l=o.n(a),n=(o("DGeY"),o("KZzr")),s=o.n(n),r=(o("EMu8"),o("8606")),d=o.n(r),c=(o("7Kd7"),o("N4fY")),u=o.n(c),p=(o("Ql/2"),o("QQVE")),f=o.n(p),g=(o("p8y5"),o("3zPb")),h=o.n(g),m=(o("BvH3"),o("asm4")),v=o.n(m),_=(o("GVEf"),o("7t/g")),y=o.n(_),b=(o("VGZy"),o("7N9w")),w=o.n(b),C=(o("OKBm"),o("rUEw")),x=o.n(C),$=(o("y7W8"),o("i7wE")),D=o.n($),S=o("Kw5r"),F=o("h8tt"),T=o("tOnh");S.default.use(D.a),S.default.use(x.a),S.default.use(w.a),S.default.use(y.a),S.default.use(v.a),S.default.use(h.a),S.default.use(f.a),S.default.use(u.a),S.default.use(d.a),S.default.use(s.a);var k={name:"CategoriesManagePage",computed:{showCategoriesList:function(){return this.$store.getters.getShowCategoriesList},dialogForm:function(){return"add"===this.dialogType?this.dialogAddForm:this.dialogUpdateFrom}},data:function(){return{dialogType:"add",dialogAddForm:{code:"",name:"",used_count:0,description:""},dialogUpdateFrom:{},dialogFormRules:{code:[{validator:function(e,t,o){(t=t.trim())?/^[a-zA-Z]{2,10}$/.test(t)?o():o(new Error("code 只能2-10位, 以字母数字下划线组成")):o(new Error("分类的 code 不能为空"))},trigger:"blur"}],name:[{validator:function(e,t,o){(t=t.trim())?/[A-Za-z0-9_\-\u4e00-\u9fa5]{2,8}/.test(t)?o():o(new Error("code 只能2-8位, 以字母数字下划线和汉字组成")):o(new Error("分类的名称 不能为空"))},trigger:"blur"}],description:[{validator:function(e,t,o){(t=t.trim())&&!/[A-Za-z0-9_\-\u4e00-\u9fa5]{2,50}/.test(t)?o(new Error("分类的描述只能2-50位, 以字母数字下划线和汉字组成")):o()},trigger:"blur"}]},isDialogShow:!1,isDialogLoading:!1,isDeleteLoading:!1}},beforeCreate:function(){this.$store.dispatch("getAllCategoriesList")},methods:{handleAddNewCategories:function(){this.dialogType="add",this.isDialogShow=!0},handleHideDialog:function(e){this.$refs[e].resetFields(),this.isDialogShow=!1},getTagProps:function(e){return e>=0&&e<=5?{size:"small",type:"danger"}:e>5&&e<=20?{size:"medium",type:"info"}:szie>20&&e<=50?{size:"",type:"success"}:{size:"",type:""}},handleAddAndUpdateCategories:function(e){var t=this,o="add"===this.dialogType?F.a.addCategoriesUrl:F.a.updateCategoriesUrl;this.$refs[e].validate(function(i){if(!i)return!1;t.isDialogLoading=!0,T.a.post(o,t.dialogForm).then(function(o){var i=o.status,a=o.message;o.data;"ok"===i?(t.isDialogLoading=!1,l.a.success(a),t.handleHideDialog(e),t.$store.dispatch("getAllCategoriesList")):t.isDialogLoading=!1})})},handleChangeTag:function(e){this.dialogType="update",this.dialogUpdateFrom=e,this.isDialogShow=!0},handleDeleteTag:function(e,t){var o=this;this.isDeleteLoading=!0,T.a.post(F.a.deleteCategoriesUrl,t).then(function(e){var i=e.status,a=e.message;e.data;"ok"===i?(o.isDeleteLoading=!1,t.popover=!1,l.a.success(a),o.$store.dispatch("getAllCategoriesList")):o.isDeleteLoading=!1})}}},z=(o("yf4d"),o("KHd+")),E=Object(z.a)(k,i,[],!1,null,"cde19d58",null);E.options.__file="src/component/CategoriesManagePage/CategoriesManagePage.vue";t.default=E.exports},y7W8:function(e,t,o){},yf4d:function(e,t,o){"use strict";var i=o("D1zH");o.n(i).a}}]);