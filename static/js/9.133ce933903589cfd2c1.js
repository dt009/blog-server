(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"E+re":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"router-manage-page"},[a("h2",[e._v("路由管理")]),e._v(" "),a("div",{staticClass:"page-main"},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddNewRouter}},[e._v("新增一个路由")]),e._v(" "),a("el-dialog",{attrs:{visible:e.isDialogShow,title:"add"===e.dialogType?"新增路由":"修改路由"},on:{"update:visible":function(t){e.isDialogShow=t}}},[a("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"status-icon":"",rules:e.dialogFormRules}},[a("el-form-item",{attrs:{label:"路由名称","label-width":"120px",xsize:"small",prop:"name"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"路由名称 eg: HomePage"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路由路径","label-width":"120px",size:"small",prop:"path"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"路由的路径 eg: /home"},model:{value:e.dialogForm.path,callback:function(t){e.$set(e.dialogForm,"path",t)},expression:"dialogForm.path"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路由页面","label-width":"120px",size:"small",prop:"label"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"页面名称: eg: 主页"},model:{value:e.dialogForm.label,callback:function(t){e.$set(e.dialogForm,"label",t)},expression:"dialogForm.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路由展示icon","label-width":"120px",size:"small",prop:"icon"}},[a("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"页面图标 eg: &#xe653;"},model:{value:e.dialogForm.icon,callback:function(t){e.$set(e.dialogForm,"icon",t)},expression:"dialogForm.icon"}}),e._v(" "),a("span",{staticClass:"font",staticStyle:{color:"#509eff"},domProps:{innerHTML:e._s(e.dialogForm.icon)}})],1),e._v(" "),a("el-form-item",{attrs:{label:"路由的分类","label-width":"120px",size:"small"}},[a("el-radio-group",{model:{value:e.dialogForm.type,callback:function(t){e.$set(e.dialogForm,"type",t)},expression:"dialogForm.type"}},[a("el-radio",{attrs:{label:"other"}}),e._v(" "),a("el-radio",{attrs:{label:"own"}}),e._v(" "),a("el-radio",{attrs:{label:"not_nav"}}),e._v(" "),a("el-radio",{attrs:{label:"params"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{"label-width":"120px"}},[a("el-button",{attrs:{disabled:e.isDialogLoading},on:{click:function(t){e.handleHideDialog("dialogForm")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.isDialogLoading},on:{click:function(t){e.handleAddAndUpdateRouter("dialogForm")}}},[e._v(e._s("add"===e.dialogType?"确认添加":"确认修改"))])],1)],1)],1),e._v(" "),a("el-table",{attrs:{data:e.showList,stripe:"","header-cell-style":{background:"#f5f7fa"}}},[a("el-table-column",{attrs:{label:"",prop:"sign",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"name",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"path",prop:"path"}}),e._v(" "),a("el-table-column",{attrs:{label:"label",prop:"label",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"type",prop:"type",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"icon",prop:"icon",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("span",[e._v(e._s(t.row.icon))]),e._v(" "),a("span",{staticStyle:{color:"#509eff"}},[e._v("预览:")]),a("span",{staticClass:"font",staticStyle:{color:"#509eff"},domProps:{innerHTML:e._s(t.row.icon)}})])}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleChangeRouter(t.row)}}},[e._v("修改")]),e._v(" "),a("el-popover",{attrs:{placement:"top"},model:{value:t.row.popover,callback:function(a){e.$set(t.row,"popover",a)},expression:"scope.row.popover"}},[a("p",[a("i",{staticClass:"el-icon-warning",staticStyle:{color:"#0f0"}}),e._v(" 确定要删除这条信息吗?")]),e._v(" "),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.popover=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.isDeleteLoading,size:"mini"},on:{click:function(a){e.handleDeleteRouter(t.$index,t.row)}}},[e._v("确定")])],1),e._v(" "),a("el-button",{attrs:{slot:"reference",size:"small",type:"text"},on:{click:function(e){t.row.popover=!0}},slot:"reference"},[e._v("删除")])],1)],1)}}])})],1)],1)])};o._withStripped=!0;a("D7fx"),a("RQ3N");var l=a("9SnE"),i=a.n(l),r=(a("/gf8"),a("asWM")),n=a.n(r),s=(a("tdgA"),a("9JSI")),d=a.n(s),u=(a("EMu8"),a("8606")),c=a.n(u),p=(a("7Kd7"),a("N4fY")),g=a.n(p),m=(a("Ql/2"),a("QQVE")),f=a.n(m),h=(a("p8y5"),a("3zPb")),v=a.n(h),b=(a("BvH3"),a("asm4")),w=a.n(b),_=(a("GVEf"),a("7t/g")),y=a.n(_),F=(a("VGZy"),a("7N9w")),x=a.n(F),R=(a("OKBm"),a("rUEw")),D=a.n(R),S=a("Kw5r"),k=a("tOnh"),L=a("h8tt");S.default.use(D.a),S.default.use(x.a),S.default.use(y.a),S.default.use(w.a),S.default.use(v.a),S.default.use(f.a),S.default.use(g.a),S.default.use(c.a),S.default.use(d.a),S.default.use(n.a);var $={name:"RouterMangePage",computed:{showList:function(){return this.$store.getters.getShowRouterList},dialogForm:function(){return"add"===this.dialogType?this.dialogNewForm:this.updateRouterForm}},beforeCreate:function(){this.$store.dispatch("getRouterList")},data:function(){return{isDialogShow:!1,isDeleteLoading:!1,dialogNewForm:{name:"",label:"",path:"",icon:"",type:"other"},isDialogLoading:!1,updateRouterForm:{},dialogType:"add",dialogFormRules:{name:[{validator:function(e,t,a){(t=t.trim())?/^[A-Z][a-zA-Z]+Page$/.test(t)?a():a(new Error("路由名都是一个大写字母开头 以 Page 结尾的")):a(new Error("路由名称不能为空"))},trigger:"blur"}],path:[{validator:function(e,t,a){(t=t.trim())?/^\/[a-zA-z]+/.test(t)||"/"===t?a():a(new Error('路由路径请以 "/" 开头')):a(new Error("路由的路径不能为空"))},trigger:"blur"}],label:[{validator:function(e,t,a){(t=t.trim())?t.length>2&&t.length>8?a(new Error("路由页面的长度应该为 3-8 个字")):a():a(new Error("路由页面不能为空"))},trigger:"blur"}],icon:[{validator:function(e,t,a){(t=t.trim())&&!/^(&#).+;$/.test(t)?a(new Error("输入不正确")):a()},trigger:"blur"}]}}},methods:{handleChangeRouter:function(e){this.dialogType="update",this.updateRouterForm=e,this.isDialogShow=!0},handleDeleteRouter:function(e,t){var a=this;this.isDeleteLoading=!0,k.a.post(L.a.deleteRouterUrl,t).then(function(e){var o=e.status,l=e.message;e.data;"ok"===o?(a.isDeleteLoading=!1,t.popover=!1,i.a.success(l),a.$store.dispatch("getRouterList")):a.isDeleteLoading=!1})},handleAddNewRouter:function(){this.dialogType="add",this.isDialogShow=!0},handleHideDialog:function(e){this.$refs[e].resetFields(),this.isDialogShow=!1},handleAddAndUpdateRouter:function(e){var t=this,a="add"===this.dialogType?L.a.addRouterUrl:L.a.updateRouterUrl;this.$refs[e].validate(function(o){if(!o)return!1;t.isDialogLoading=!0,k.a.post(a,t.dialogForm).then(function(a){console.log(a);var o=a.status,l=a.message;a.data;"ok"===o?(t.isDialogLoading=!1,i.a.success(l),t.handleHideDialog(e),t.$store.dispatch("getRouterList")):t.isDialogLoading=!1})})}}},z=(a("OAxd"),a("KHd+")),E=Object(z.a)($,o,[],!1,null,"5de5e518",null);E.options.__file="src/component/RouterManagePage/RouterManagePage.vue";t.default=E.exports},OAxd:function(e,t,a){"use strict";var o=a("y5gM");a.n(o).a},y5gM:function(e,t,a){}}]);