(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"3zPb":function(e,t,o){e.exports=function(e){var t={};function o(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist/",o(o.s=61)}({0:function(e,t){e.exports=function(e,t,o,a,i,l){var n,s=e=e||{},r=typeof e.default;"object"!==r&&"function"!==r||(n=e,s=e.default);var d,c="function"==typeof s?s.options:s;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),o&&(c.functional=!0),i&&(c._scopeId=i),l?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(l)},c._ssrRegister=d):a&&(d=a),d){var u=c.functional,p=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),p(e,t)}):c.beforeCreate=p?[].concat(p,d):[d]}return{esModule:n,exports:s,options:c}}},1:function(e,t){e.exports=o("0BDH")},13:function(e,t){e.exports=o("UShQ")},61:function(e,t,o){"use strict";t.__esModule=!0;var a=function(e){return e&&e.__esModule?e:{default:e}}(o(62));a.default.install=function(e){e.component(a.default.name,a.default)},t.default=a.default},62:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(63),i=o.n(a),l=o(64),n=o(0)(i.a,l.a,!1,null,null,null);t.default=n.exports},63:function(e,t,o){"use strict";t.__esModule=!0;var a=n(o(13)),i=n(o(8)),l=n(o(1));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:"ElDialog",mixins:[a.default,l.default,i.default],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1}},data:function(){return{closed:!1}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){t.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"==typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}}},64:function(e,t,o){"use strict";var a={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("transition",{attrs:{name:"dialog-fade"},on:{"after-leave":e.afterLeave}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.handleWrapperClick(t)}}},[o("div",{ref:"dialog",staticClass:"el-dialog",class:[{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style},[o("div",{staticClass:"el-dialog__header"},[e._t("title",[o("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?o("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[o("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?o("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?o("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},staticRenderFns:[]};t.a=a},8:function(e,t){e.exports=o("K7XR")}})},DGeY:function(e,t,o){},EMu8:function(e,t,o){},M0AO:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"tags-manage-page"},[o("h2",[e._v("标签管理")]),e._v(" "),o("div",{staticClass:"tags-manage-page"},[o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:e.handleAddNewTags}},[e._v("新增一个标签")]),e._v(" "),o("el-dialog",{attrs:{visible:e.isDialogShow,title:"add"===e.dialogType?"新增标签":"修改标签"},on:{"update:visible":function(t){e.isDialogShow=t}}},[o("el-form",{ref:"dialogForm",attrs:{model:e.dialogForm,"status-icon":"",rules:e.dialogFormRules}},[o("el-form-item",{attrs:{label:"标签的 Code","label-width":"120px",xsize:"small",prop:"code"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"标签的 Code eg: test || study"},model:{value:e.dialogForm.code,callback:function(t){e.$set(e.dialogForm,"code",t)},expression:"dialogForm.code"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"标签的 Name","label-width":"120px",xsize:"small",prop:"name"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"标签名称 eg: 测试 || 数据库"},model:{value:e.dialogForm.name,callback:function(t){e.$set(e.dialogForm,"name",t)},expression:"dialogForm.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"标签的描述","label-width":"120px",xsize:"small",prop:"description"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{"auto-complete":"off",placeholder:"标签描述 eg: 这是标签标示测试"},model:{value:e.dialogForm.description,callback:function(t){e.$set(e.dialogForm,"description",t)},expression:"dialogForm.description"}})],1),e._v(" "),o("el-form-item",{attrs:{"label-width":"120px"}},[o("el-button",{on:{click:function(t){e.handleHideDialog("dialogForm")}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.isDialogLoading},on:{click:function(t){e.handleAddAndUpdateTags("dialogForm")}}},[e._v(e._s("add"===e.dialogType?"确认添加":"确认修改"))])],1)],1)],1),e._v(" "),o("el-table",{attrs:{data:e.showTagsList,stripe:"","header-cell-style":{background:"#f5f7fa"}}},[o("el-table-column",{attrs:{label:"",prop:"sign",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{label:"标签 Code",prop:"code",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{label:"标签名称",prop:"name",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{label:"使用次数",prop:"used_count",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"标签描述",prop:"description","show-overflow-tooltip":!0}}),e._v(" "),o("el-table-column",{attrs:{label:"预览",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[o("el-tooltip",{attrs:{content:t.row.description,placement:"top",effect:"light"}},[o("el-tag",{attrs:{hit:!0,size:e.getTagProps(t.row.used_count).size,type:e.getTagProps(t.row.used_count).type}},[o("div",[e._v(e._s(t.row.name))])])],1)],1)}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return o("div",{},[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){e.handleChangeTag(t.row)}}},[e._v("修改")]),e._v(" "),o("el-popover",{attrs:{placement:"top"},model:{value:t.row.popover,callback:function(o){e.$set(t.row,"popover",o)},expression:"scope.row.popover"}},[o("p",[o("i",{staticClass:"el-icon-warning",staticStyle:{color:"#0f0"}}),e._v(" 确定要删除这条信息吗?")]),e._v(" "),o("div",{staticStyle:{"text-align":"right",margin:"0"}},[o("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.row.popover=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",loading:e.isDeleteLoading,size:"mini"},on:{click:function(o){e.handleDeleteTag(t.$index,t.row)}}},[e._v("确定")])],1),e._v(" "),o("el-button",{attrs:{slot:"reference",size:"small",type:"text"},on:{click:function(e){t.row.popover=!0}},slot:"reference"},[e._v("删除")])],1)],1)}}])})],1)],1)])};a._withStripped=!0;o("D7fx"),o("RQ3N");var i=o("9SnE"),l=o.n(i),n=(o("DGeY"),o("KZzr")),s=o.n(n),r=(o("EMu8"),o("8606")),d=o.n(r),c=(o("7Kd7"),o("N4fY")),u=o.n(c),p=(o("Ql/2"),o("QQVE")),f=o.n(p),g=(o("p8y5"),o("3zPb")),h=o.n(g),m=(o("BvH3"),o("asm4")),v=o.n(m),_=(o("GVEf"),o("7t/g")),b=o.n(_),w=(o("VGZy"),o("7N9w")),y=o.n(w),C=(o("OKBm"),o("rUEw")),T=o.n(C),x=(o("y7W8"),o("i7wE")),$=o.n(x),D=o("Kw5r"),S=o("h8tt"),F=o("tOnh");D.default.use($.a),D.default.use(T.a),D.default.use(y.a),D.default.use(b.a),D.default.use(v.a),D.default.use(h.a),D.default.use(f.a),D.default.use(u.a),D.default.use(d.a),D.default.use(s.a);var k={name:"TagsManagePage",computed:{showTagsList:function(){return this.$store.getters.getShowTagsList},dialogForm:function(){return"add"===this.dialogType?this.dialogAddForm:this.dialogUpdateFrom}},data:function(){return{dialogType:"add",dialogAddForm:{code:"",name:"",used_count:0,description:""},dialogUpdateFrom:{},dialogFormRules:{code:[{validator:function(e,t,o){(t=t.trim())?/^[a-zA-Z]{2,10}$/.test(t)?o():o(new Error("code 只能2-10位, 以字母数字下划线组成")):o(new Error("标签的 code 不能为空"))},trigger:"blur"}],name:[{validator:function(e,t,o){(t=t.trim())?/[A-Za-z0-9_\-\u4e00-\u9fa5]{2,8}/.test(t)?o():o(new Error("code 只能2-8位, 以字母数字下划线和汉字组成")):o(new Error("标签的名称 不能为空"))},trigger:"blur"}],description:[{validator:function(e,t,o){(t=t.trim())&&!/[A-Za-z0-9_\-\u4e00-\u9fa5]{2,50}/.test(t)?o(new Error("标签的描述只能2-50位, 以字母数字下划线和汉字组成")):o()},trigger:"blur"}]},isDialogShow:!1,isDialogLoading:!1,isDeleteLoading:!1}},beforeCreate:function(){this.$store.dispatch("getAllTagsList")},methods:{handleAddNewTags:function(){this.dialogType="add",this.isDialogShow=!0},handleHideDialog:function(e){this.$refs[e].resetFields(),this.isDialogShow=!1},getTagProps:function(e){return e>=0&&e<=5?{size:"mini",type:"danger"}:e>5&&e<=20?{size:"small",type:"info"}:szie>20&&e<=50?{size:"medium",type:"success"}:{size:"",type:"warning"}},handleAddAndUpdateTags:function(e){var t=this,o="add"===this.dialogType?S.a.addTagsUrl:S.a.updateTagsUrl;this.$refs[e].validate(function(a){if(!a)return!1;t.isDialogLoading=!0,F.a.post(o,t.dialogForm).then(function(o){var a=o.status,i=o.message;o.data;"ok"===a?(t.isDialogLoading=!1,l.a.success(i),t.handleHideDialog(e),t.$store.dispatch("getAllTagsList")):t.isDialogLoading=!1})})},handleChangeTag:function(e){this.dialogType="update",this.dialogUpdateFrom=e,this.isDialogShow=!0},handleDeleteTag:function(e,t){var o=this;this.isDeleteLoading=!0,F.a.post(S.a.deleteTagsUrl,t).then(function(e){var a=e.status,i=e.message;e.data;"ok"===a?(o.isDeleteLoading=!1,t.popover=!1,l.a.success(i),o.$store.dispatch("getAllTagsList")):o.isDeleteLoading=!1})}}},E=(o("wwdI"),o("KHd+")),z=Object(E.a)(k,a,[],!1,null,"f2979318",null);z.options.__file="src/component/TagsManagePage/TagsManagePage.vue";t.default=z.exports},p8y5:function(e,t,o){},qbGh:function(e,t,o){},wwdI:function(e,t,o){"use strict";var a=o("qbGh");o.n(a).a},y7W8:function(e,t,o){}}]);